import{g as ne}from"./el-input-CqMPrx2P.js";/* empty css                   *//* empty css                        */import"./el-tooltip-l0sNRNKZ.js";/* empty css                     *//* empty css                  *//* empty css                      *//* empty css                     *//* empty css                  */import{g as oe,e as se,a as le}from"./exam-CEud_0Zz.js";import{g as ie}from"./user-DB2PNCpX.js";import{r,a as V,c,b as o,F as y,s as L,d as n,w as l,D as re,I as ce,J as ue,o as i,K as pe,t as f,e as d,f as g,g as P,p as me,n as de,L as U,h as ge,M as _e,B as fe,C as ve,G as xe,H as we}from"./index-DsVrXRQN.js";import{_ as ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ye="/assets/exam-_D9Xx70g.png",$=_=>(me("data-v-fb12226b"),_=_(),de(),_),he={class:"exam-page flex-col"},Ce={class:"exam-selected-section flex-col"},be={class:"exam-option-group flex-row justify-between"},Se=["onClick"],Ee={class:"center-box"},ze=$(()=>o("span",{class:"exam-list-title"},"推荐竞赛",-1)),De={class:"exam-list-group flex-row"},Te=$(()=>o("div",null,[o("img",{src:ye})],-1)),Ne={class:"right-info"},Ie={class:"exam-title"},Ve={class:"exam-content flex-col justify-between"},Le={class:"exam-button-container"},Pe={key:0,class:"exam-hash-entry"},Ue={key:1,class:"exam-hash-entry"},$e={key:2},je={class:"exam-page-pagination flex-row"},Re={__name:"Exam",setup(_){const h=r([]),C=r(0),b=r(0),j=r([{label:"未完赛",value:0},{label:"历史竞赛",value:1}]),s=V({pageNum:1,pageSize:9,type:0});async function u(){const e=await oe(s);h.value=e.rows,C.value=e.total}u();async function R(e){b.value=e,s.pageNum=1,s.type=e,u()}function B(){s.value.pageNum=1,u()}function F(){s.pageNum=1,s.pageSize=9,s.type=0,u()}function O(e){s.pageNum=1,u()}function A(e){u()}function H(e){const a=new Date;return new Date(e.startTime)<a&&new Date(e.endTime)>a&&!e.enter}function M(e){const a=new Date;return new Date(e.startTime)>a&&e.enter}function G(e){const a=new Date;return new Date(e.endTime)<a}function J(e){const a=new Date;return new Date(e.startTime)<a&&new Date(e.endTime)>a&&e.enter}function K(e){const a=new Date;return new Date(e.startTime)>a&&!e.enter}const S=r(!1);async function X(){ne()&&(await ie(),S.value=!0)}async function q(e){if(await X(),!S.value){U.error("请先登录后报名参赛,谢谢");return}const a=r({examId:e});await se(a.value),U.success("您已报名成功，请按时参赛"),u()}function E(e){ge.push(`/c-oj/anwser?examId=${e.examId}&examTitle=${e.title}&examEndTime=${e.endTime}`)}const p=V({examId:"",pageNum:1,pageSize:9}),z=r([]),D=r(0);function Q(e){p.pageNum=1,x()}function W(e){x()}const v=r(!1);async function x(){const e=await le(p);z.value=e.rows,D.value=e.total}function Y(e){v.value=!0,p.examId=e,x()}return(e,a)=>{const Z=_e,T=fe,m=ve,ee=re,N=ce,w=xe,te=we,ae=ue;return i(),c(y,null,[o("div",he,[o("div",Ce,[o("div",be,[(i(!0),c(y,null,L(j.value,t=>(i(),c("div",{class:pe(["exam-option",{selected:b.value===t.value}]),key:t.value,onClick:I=>R(t.value)},f(t.label),11,Se))),128))]),o("div",Ee,[ze,n(ee,{inline:"true",class:"exam-navigation flex-row justify-between"},{default:l(()=>[n(T,{label:"竞赛时间",prop:"datetimerange",class:"exam-navigation-box"},{default:l(()=>[n(Z,{style:{width:"360px"},modelValue:s.datetimerange,"onUpdate:modelValue":a[0]||(a[0]=t=>s.datetimerange=t),type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue"])]),_:1}),n(T,null,{default:l(()=>[n(m,{onClick:B,plain:"",type:"primary"},{default:l(()=>[d("搜索")]),_:1}),n(m,{onClick:F,plain:"",type:"info"},{default:l(()=>[d("重置")]),_:1})]),_:1})]),_:1}),o("div",De,[(i(!0),c(y,null,L(h.value,(t,I)=>(i(),c("div",{class:"exam-list-item flex-col",key:I},[Te,o("div",Ne,[o("span",Ie,f(t.title),1),o("div",Ve,[o("span",null,"开赛时间："+f(t.startTime),1),o("span",null,"结束时间："+f(t.endTime),1)]),o("div",Le,[H(t)?(i(),c("span",Pe,"已开赛")):g("",!0),M(t)?(i(),c("span",Ue,"已报名")):g("",!0),G(t)?(i(),c("div",$e,[n(m,{class:"exam-practice-button",type:"primary",plain:"",onClick:k=>E(t)},{default:l(()=>[d("竞赛练习")]),_:2},1032,["onClick"]),n(m,{class:"exam-rank-button",type:"primary",plain:"",onClick:k=>Y(t.examId)},{default:l(()=>[d("查看排名")]),_:2},1032,["onClick"])])):g("",!0),J(t)?(i(),P(m,{key:3,class:"exam-start-button",type:"primary",plain:"",onClick:k=>E(t)},{default:l(()=>[d("开始答题")]),_:2},1032,["onClick"])):g("",!0),K(t)?(i(),P(m,{key:4,class:"exam-enter-button",type:"primary",plain:"",onClick:k=>q(t.examId)},{default:l(()=>[d("报名参赛")]),_:2},1032,["onClick"])):g("",!0)])])]))),128))]),o("div",je,[n(N,{background:"",layout:"total, sizes, prev, pager, next, jumper",total:C.value,"current-page":s.pageNum,"onUpdate:currentPage":a[1]||(a[1]=t=>s.pageNum=t),"page-size":s.pageSize,"onUpdate:pageSize":a[2]||(a[2]=t=>s.pageSize=t),"page-sizes":[3,6,9,12],onSizeChange:O,onCurrentChange:A},null,8,["total","current-page","page-size"])])])])]),n(ae,{modelValue:v.value,"onUpdate:modelValue":a[5]||(a[5]=t=>v.value=t),width:"600px",top:"30vh","show-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,class:"oj-login-dialog-centor",center:""},{default:l(()=>[n(te,{data:z.value},{default:l(()=>[n(w,{label:"排名",prop:"examRank"}),n(w,{label:"用户昵称",prop:"nickName"}),n(w,{label:"用户得分",prop:"score"})]),_:1},8,["data"]),n(N,{class:"range_page",background:"",layout:"total, sizes, prev, pager, next, jumper",total:D.value,"current-page":p.pageNum,"onUpdate:currentPage":a[3]||(a[3]=t=>p.pageNum=t),"page-size":p.pageSize,"onUpdate:pageSize":a[4]||(a[4]=t=>p.pageSize=t),"page-sizes":[5,10,15,20],onSizeChange:Q,onCurrentChange:W},null,8,["total","current-page","page-size"])]),_:1},8,["modelValue"])],64)}}},Ye=ke(Re,[["__scopeId","data-v-fb12226b"]]);export{Ye as default};
