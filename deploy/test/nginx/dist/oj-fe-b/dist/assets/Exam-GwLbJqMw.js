import"./request-BarWf1iR.js";/* empty css                     *//* empty css                     */import{g as j,d as F,p as L,c as R}from"./exam-qe0bbvjk.js";import{f as O,r as k,c as _,b as t,w as a,T as A,R as Q,U as W,V as X,o as s,k as o,u as Y,W as Z,X as r,h as f,d as E,Z as q,P as G,E as H,Q as J,Y as K,_ as M}from"./index-Br-KH4mf.js";const ee={key:0},te={key:1},ae={key:0},ne={key:1},de={__name:"Exam",setup(le){function m(l){const i=new Date;return new Date(l.startTime)>i}const n=O({pageNum:1,pageSize:10,startTime:"",endTime:"",title:""}),h=k([]),v=k(0),c=k([]);async function u(){c.value[0]instanceof Date&&(n.startTime=c.value[0].toISOString()),c.value[1]instanceof Date&&(n.endTime=c.value[1].toISOString());const l=await j(n);h.value=l.rows,v.value=l.total}u();function b(l){n.pageNum=1,u()}function C(l){u()}function S(){n.pageNum=1,u()}function T(){n.pageNum=1,n.pageSize=10,n.title="",n.startTime="",n.endTime="",c.value.length=0,u()}function z(){E.push("/oj/layout/updateExam?type=add")}async function N(l){E.push(`/oj/layout/updateExam?type=edit&examId=${l}`)}async function V(l){await F(l),n.pageNum=1,u()}async function I(l){await L(l),u()}async function w(l){await R(l),u()}return(l,i)=>{const P=q,x=G,D=H,p=J,U=Q,d=K,g=M,$=W,B=X;return s(),_(A,null,[t(U,{inline:"true"},{default:a(()=>[t(x,{label:"创建日期"},{default:a(()=>[t(P,{modelValue:c.value,"onUpdate:modelValue":i[0]||(i[0]=e=>c.value=e),style:{width:"240px"},type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),t(x,{label:"竞赛名称"},{default:a(()=>[t(D,{modelValue:n.title,"onUpdate:modelValue":i[1]||(i[1]=e=>n.title=e),placeholder:"请您输入要搜索的竞赛名称"},null,8,["modelValue"])]),_:1}),t(x,null,{default:a(()=>[t(p,{onClick:S,plain:""},{default:a(()=>[o("搜索")]),_:1}),t(p,{onClick:T,plain:"",type:"info"},{default:a(()=>[o("重置")]),_:1}),t(p,{type:"primary",icon:Y(Z),plain:"",onClick:z},{default:a(()=>[o("添加竞赛")]),_:1},8,["icon"])]),_:1})]),_:1}),t($,{height:"526px",data:h.value},{default:a(()=>[t(d,{prop:"title",label:"竞赛标题"}),t(d,{prop:"startTime",width:"180px",label:"竞赛开始时间"}),t(d,{prop:"endTime",width:"180px",label:"竞赛结束时间"}),t(d,{label:"是否开赛",width:"100px"},{default:a(({row:e})=>[m(e)?(s(),_("div",te,[t(g,{type:"info"},{default:a(()=>[o("未开赛")]),_:1})])):(s(),_("div",ee,[t(g,{type:"warning"},{default:a(()=>[o("已开赛")]),_:1})]))]),_:1}),t(d,{prop:"status",width:"100px",label:"是否发布"},{default:a(({row:e})=>[e.status==0?(s(),_("div",ae,[t(g,{type:"danger"},{default:a(()=>[o("未发布")]),_:1})])):r("",!0),e.status==1?(s(),_("div",ne,[t(g,{type:"success"},{default:a(()=>[o("已发布")]),_:1})])):r("",!0)]),_:1}),t(d,{prop:"createName",width:"140px",label:"创建用户"}),t(d,{prop:"createTime",width:"180px",label:"创建时间"}),t(d,{label:"操作",width:"180px"},{default:a(({row:e})=>[m(e)&&e.status==0?(s(),f(p,{key:0,type:"text",onClick:y=>N(e.examId)},{default:a(()=>[o("编辑 ")]),_:2},1032,["onClick"])):r("",!0),m(e)&&e.status==0?(s(),f(p,{key:1,type:"text",onClick:y=>V(e.examId),class:"red"},{default:a(()=>[o("删除 ")]),_:2},1032,["onClick"])):r("",!0),e.status==1&&m(e)?(s(),f(p,{key:2,type:"text",onClick:y=>w(e.examId)},{default:a(()=>[o("撤销发布")]),_:2},1032,["onClick"])):r("",!0),e.status==0&&m(e)?(s(),f(p,{key:3,type:"text",onClick:y=>I(e.examId)},{default:a(()=>[o("发布")]),_:2},1032,["onClick"])):r("",!0),m(e)?r("",!0):(s(),f(p,{key:4,type:"text"},{default:a(()=>[o("已开赛，不允许操作")]),_:1}))]),_:1})]),_:1},8,["data"]),t(B,{background:"",size:"small",layout:"total, sizes, prev, pager, next, jumper",total:v.value,"current-page":n.pageNum,"onUpdate:currentPage":i[2]||(i[2]=e=>n.pageNum=e),"page-size":n.pageSize,"onUpdate:pageSize":i[3]||(i[3]=e=>n.pageSize=e),"page-sizes":[5,10,15,20],onSizeChange:b,onCurrentChange:C},null,8,["total","current-page","page-size"])],64)}}};export{de as default};
